<div class="w-full max-w-xl bg-[#F04747] p-8
            border-4 border-[#FFB636] outline outline-8 outline-[#F04747]
            rounded-2xl shadow-2xl relative" data-controller="simulator">
  <div class="space-y-6">
    <div class="text-center border-b border-[#FFB636] p-6">
      <h2 class="text-2xl font-bold text-[#FFB636]">Bitcoin Hong Bao Calculator</h2>
      <p class="text-[#FFB636]/80">Calculate your child's Bitcoin gifts over the years</p>
    </div>

    <div class="p-6 space-y-6">
      <%= form_with(model: @bitcoin_price, url: root_path, method: :get,
                    class: "space-y-6") do |form| %>
      <%# Birthday Input Section %>
      <div class="bg-black/20 border-2 border-[#FFB636] rounded-lg p-4 text-center">
        <div class="space-y-2">
          <label for="birthday" class="text-[#FFB636]">Child's Birthday</label>
          <%= form.date_field :birthdate, required: true,
                            data: { format: 'dd/mm/yyyy' },
                            class: "w-full bg-white/10 text-white border-2 border-[#FFB636] rounded-lg py-2 px-3" %>
          <% if @totals&.dig(:age) %>
            <p class="text-[#FFB636]">Age: <%= @totals[:age] %> years old</p>
          <% end %>

          <%# Calculate Bitcoin Price Button %>
          <%= form.button type: "button",
                         onclick: "this.form.requestSubmit()",
                         class: "w-full mt-2 bg-[#FFB636] hover:bg-[#FFB636]/90 text-white font-bold py-2 px-4 rounded-lg transition-colors" do %>
            Calculate Bitcoin Price Estimates
          <% end %>
        </div>
      </div>

      <%# Gift Cards Grid %>
      <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
        <%# Birthday Card %>
        <div class="bg-black/20 border-2 border-[#FFB636] rounded-lg p-4 text-center">
    <%= image_tag "icons/gift.svg", class: "w-8 h-8 mx-auto mb-2 text-[#FFB636]" %>
          <h3 class="text-lg font-bold text-[#FFB636]">Birthday</h3>
          <div class="space-y-2 mt-2">
            <%= form.number_field :birthday_amount, required: true,
                                  onchange: 'this.form.requestSubmit()',
                                  class: "w-full bg-white/10 text-white border-2 border-[#FFB636] rounded-lg py-2 px-3 text-center" %>
            <p class="text-xl font-bold"><%= @totals[:birthday_total] %> $</p>
            <p class="text-sm text-white/60"><%= @birthdate_price_btc %> BTC</p>
          </div>
        </div>

        <%# Christmas Card %>
        <div class="bg-black/20 border-2 border-[#FFB636] rounded-lg p-4 text-center">
          <%= image_tag "icons/tree.svg", class: "w-8 h-8 mx-auto mb-2 text-[#FFB636]" %>
          <h3 class="text-lg font-bold text-[#FFB636]">Christmas</h3>
          <div class="space-y-2 mt-2">
            <%= form.number_field :christmas_amount, required: true,
                                  onchange: 'this.form.requestSubmit()',
                                  class: "w-full bg-white/10 text-white border-2 border-[#FFB636] rounded-lg py-2 px-3 text-center" %>
            <p class="text-xl font-bold"><%= @totals[:christmas_total] %> $</p>
            <p class="text-sm text-white/60"><%= @christmas_price_btc %> BTC</p>
          </div>
        </div>

        <%# Chinese New Year Card %>
        <div class="bg-black/20 border-2 border-[#FFB636] rounded-lg p-4 text-center">
          <%= image_tag "icons/chinese-lantern.svg", class: "w-8 h-8 mx-auto mb-2 text-[#FFB636]" %>
          <h3 class="text-lg font-bold text-[#FFB636]">Chinese New Year</h3>
          <div class="space-y-2 mt-2">
            <%= form.number_field :cny_amount, required: true,
                                  onchange: 'this.form.requestSubmit()',
                                  class: "w-full bg-white/10 text-white border-2 border-[#FFB636] rounded-lg py-2 px-3 text-center" %>
            <p class="text-xl font-bold"><%= @totals[:cny_total] %> $</p>
            <p class="text-sm text-white/60"><%= @lunar_new_year_price_btc %> BTC</p>
          </div>
        </div>
      </div>

      <%# Total Bitcoin Card %>
      <div class="bg-[#FFB636] border-2 border-[#FFB636] rounded-lg p-4 text-center">
        <h3 class="text-2xl font-bold text-white">Total Bitcoin</h3>
        <p class="text-3xl font-bold text-white">
          <%= (@totals&.dig(:birthday_total) || 0) + (@totals&.dig(:christmas_total) || 0) + (@totals&.dig(:cny_total) || 0) %> $
        </p>
        <p class="text-sm text-white/80">
          <%= @totals&.dig(:total_btc) || 0 %> BTC
          <br>
          BTC Price:<span data-simulator-target="btcPrice"><%= @totals&.dig(:total_btc_to_usd) || 0 %> â‚¬</span>
        </p>
      </div>
      <% end %>
    </div>
  </div>
</div>