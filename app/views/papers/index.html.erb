<div class="overflow-y-auto flex flex-col gap-8 h-full pt-4 pb-16 md:pb-4">

  <%# Generating Papers Section - only shown if user has processing papers %>
  <% if @processing_papers.any? %>
    <section id="generating" class="px-4">
      <div class="flex items-center gap-2 mb-4">
        <span class="loading loading-spinner loading-sm text-primary"></span>
        <h3 class="text-xl font-bold">Generating (<%= @processing_papers.count %>)</h3>
      </div>
      <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
        <% @processing_papers.each do |paper| %>
          <%= turbo_stream_from paper %>
          <div id="<%= dom_id(paper) %>">
            <%= render Papers::ItemComponent.new(item: paper) %>
          </div>
        <% end %>
      </div>
    </section>
  <% end %>

  <%# Upsell banner for envelopes %>
  <%= link_to pricing_path, class: "group flex items-center p-2 pr-4 rounded-2xl bg-gradient-to-r from-red-600 to-red-700 hover:from-red-500 hover:to-red-600 transition-all shadow-lg hover:shadow-xl" do %>
    <div class="w-20 h-16 flex-shrink-0">
      <%= image_tag "red-main.png", class: "w-full h-full object-contain group-hover:scale-110 transition-transform", alt: "Bitcoin red envelopes" %>
    </div>
    <div class="flex-1 min-w-0">
      <p class="text-white font-bold">Premium Bitcoin Envelopes</p>
      <p class="text-white/70 text-sm truncate">Perfect wrap for your paper wallet gift</p>
    </div>
    <%= heroicon "chevron-right", variant: :solid, class: "w-5 h-5 text-white/50 group-hover:text-white flex-shrink-0" %>
  <% end %>

  <section id='papers' class="flex flex-col md:flex-row gap-4">
    <div>
      <h3 class="text-xl font-bold">Latest</h3>
      <%= render Papers::LineItemComponent.with_collection(Paper.order(created_at: :desc).limit(5)) %>
    </div>
    <div>
      <h3 class="text-xl font-bold">Creators</h3>
      <%= render Users::LineItemComponent.with_collection(User.order(created_at: :desc).limit(5)) %>
    </div>
    <div id="featured">
      <h3 class="text-xl font-bold">Featured</h3>
      <%= render Papers::LineItemComponent.with_collection(Paper.with_tag_name("featured").order(created_at: :desc).limit(5)) %>
    </div>
  </section>

  <section id='events' class="px-4">
    <div class="flex items-center justify-between mb-4">
      <h3 class="text-xl font-bold">Upcoming Bitcoin Days</h3>
    </div>
    <div class="flex gap-4 overflow-x-auto">
      <%# Query for all events, order them by anniversary, and display them %>
      <%= render Events::CardComponent.with_collection(Input::Event.find_by_anniversary) %>
    </div>
  </section>

  <section id='themes' class="px-4">
    <div class="flex items-center justify-between mb-4">
      <h3 class="text-xl font-bold">Top themes</h3>
    </div>
    <div class="flex gap-4 overflow-x-auto">
      <%= render Inputs::Themes::CardComponent.with_collection(Input::Theme.by_position) %>
    </div>
  </section>

</div>