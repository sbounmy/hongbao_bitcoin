<!-- Suppress dock bar on this page -->
<% content_for(:footer) do %>
  <!-- No dock bar on paper editing -->
<% end %>

<%= render MobileHeaderComponent.new(title: "Choose Theme", back_path: new_paper_path) do |header| %>
  <% header.with_action(icon: heroicon("queue-list", class: "w-6 h-6"), href: papers_path) %>
<% end %>

<div class="relative flex flex-col h-[calc(100vh-3.5rem)] md:h-screen md:flex-row">
  <!-- Mobile: Full height minus header, Desktop: Full height -->

  <!-- Paper Preview -->
  <div class="flex-1 bg-base-200 flex items-center justify-center p-4 overflow-hidden">
    <%= render Papers::PreviewComponent.new(paper: @paper) %>
  </div>

  <!-- Theme Selector (bottom on mobile, right on desktop) -->
  <% unless @paper.processing? %>
    <div class="border-t md:border-t-0 md:border-l bg-base-100 md:w-96">
      <div class="p-4">
        <h3 class="font-bold text-lg mb-4">Choose Theme</h3>

        <%= render 'theme_switcher', paper: @paper %>
      </div>

      <!-- Actions -->
      <div class="p-4 border-t">
        <div class="flex flex-col gap-2">
          <%= link_to "Finalize Paper", paper_path(@paper),
              class: "btn btn-primary w-full",
              data: { turbo: false } %>
        </div>
      </div>
    </div>
  <% end %>
</div>