<%# Step 3: Download - Clean, focused %>
<div class="<%= 'hidden' unless local_assigns[:current_step] == 3 %> flex flex-col gap-4"
     data-steps-target="content"
     data-steps-index="3">

  <%# Primary action - Download button %>
  <button type="button"
          class="btn btn-primary btn-lg w-full"
          data-action="pdf#download">
    <%= heroicon "arrow-down-tray", class: "w-5 h-5" %>
    Download PDF
  </button>

  <%# Optional - Password protection (collapsed by default) %>
  <%= render CollapseComponent.new(id: "password-protection", open: false) do |c| %>
    <% c.with_summary do %>
      <div class="flex items-center gap-2 text-sm">
        <%= heroicon "lock-closed", variant: :mini, class: "w-4 h-4" %>
        <span>Add password protection</span>
        <span class="text-base-content/40 text-xs">(optional)</span>
      </div>
    <% end %>

    <div class="space-y-3 pt-2">
      <%= render PasswordMeterComponent.new(
        input_id: "pdf-password",
        name: "pdf_password",
        placeholder: "Enter password...",
        data_targets: { pdf: "password" },
        show_visibility_toggle: true,
        min_length: 8,
        require_uppercase: true,
        require_lowercase: true,
        require_numbers: true,
        require_special: false,
        show_requirements: false,
        show_meter: true,
        input_classes: "input input-bordered w-full pr-10 bg-base-300 border-base-content/20 placeholder-base-content/40"
      ) %>
      <p class="text-xs text-base-content/50">
        ⚠️ No recovery if forgotten
      </p>
    </div>
  <% end %>
</div>
