<div data-hong-bao-target="step" data-controller="paper-pdf" data-action="canvas-front:canvasReady@window->paper-pdf#showPdfViewer">
  <div class="text-white space-y-4">
    <h3 class="font-bold">Important Instructions</h3>

    <%# PDF Generation Button %>
    <div class="mb-6">
      <button data-paper-pdf-target="printButton"
              data-action="click->paper-pdf#downloadPdf prevent"
              type="button"
              class="btn btn-primary w-full">
        Download Printable PDF
      </button>
    </div>

    <%# PDF Viewer %>
    <div class="mb-6">
      <iframe data-paper-pdf-target="pdfViewer" class="hidden"></iframe>
    </div>

    <%# Printable Area - This will be converted to PDF %>
    <div data-paper-pdf-target="printableArea" class="bg-white text-black hidden">
    <%# Cutting Instructions %>
    <%# <div class="p-4 rounded-lg mb-6">
      <h4 class="font-semibold mb-2">Cutting Instructions:</h4>
      <ol class="list-decimal list-inside space-y-2">
        <li>Print the PDF on standard A4 paper</li>
        <li>Cut along the dotted lines carefully</li>
        <li>Fold the instruction slip along the marked lines</li>
        <li>Insert the folded slip into the red envelope</li>
        <li>Keep the recovery information in a safe place</li>
      </ol>
    </div> %>
      <%# Front and Back Bills with Cutting Guidelines %>
      <div class="relative">

        <%# Bill Content %>
        <div class="grid grid-cols-1 gap-4 border-2 border-dotted border-gray-400 p-2">
          <div class="border-2">
            <%= render partial: "hong_baos/new/front_bill",
                     locals: { paper: selected_paper, hong_bao: hong_bao, context: 'print', frozen: false } %>
          </div>
          <%# Fold Lines %>
        <div class="left-0 right-0 border border-dotted border-gray-400"></div>
          <div class="border-2">
            <%= render partial: "hong_baos/new/back_bill",
                     locals: { paper: selected_paper, hong_bao: hong_bao, context: 'print', frozen: false  } %>
          </div>
        </div>
      </div>
    </div>

    <%# Preview Area %>
    <div class="grid grid-cols-1 gap-4 hidden">
      <div class="border-2 border-[#FFB636] rounded-lg p-2">
        <%= render partial: "hong_baos/new/front_bill",
                   locals: { paper: selected_paper, hong_bao: hong_bao, context: 'preview', frozen: false } %>
      </div>
      <div class="border-2 border-[#FFB636] rounded-lg p-2">
        <%= render partial: "hong_baos/new/back_bill",
                   locals: { paper: selected_paper, hong_bao: hong_bao, context: 'preview', frozen: false } %>
      </div>
    </div>
  </div>
</div>