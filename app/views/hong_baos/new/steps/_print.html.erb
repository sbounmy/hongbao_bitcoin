<div data-hong-bao-target="step" data-controller="paper-pdf">
  <div class="text-white space-y-4">
    <h3 class="font-bold">Important Instructions</h3>

    <%# PDF Generation Button %>
    <div class="mb-6">
      <button data-paper-pdf-target="printButton"
              data-action="click->paper-pdf#generatePDF prevent"
              type="button"
              class="btn btn-primary w-full">
        Download Printable PDF
      </button>
    </div>

    <%# Cutting Instructions %>
    <div class="bg-white/10 p-4 rounded-lg mb-6">
      <h4 class="font-semibold mb-2">Cutting Instructions:</h4>
      <ol class="list-decimal list-inside space-y-2">
        <li>Print the PDF on standard A4 paper</li>
        <li>Cut along the dotted lines carefully</li>
        <li>Fold the instruction slip along the marked lines</li>
        <li>Insert the folded slip into the red envelope</li>
        <li>Keep the recovery information in a safe place</li>
      </ol>
    </div>

    <%# Printable Area - This will be converted to PDF %>
    <div data-paper-pdf-target="printableArea" class="hidden">
      <%# Front and Back Bills with Cutting Guidelines %>
      <div class="relative">
        <%# Cutting Guidelines %>
        <div class="absolute inset-0 border-2 border-dashed border-gray-400"></div>

        <%# Fold Lines %>
        <div class="absolute top-1/3 left-0 right-0 border border-dotted border-gray-400"></div>
        <div class="absolute top-2/3 left-0 right-0 border border-dotted border-gray-400"></div>

        <%# Bill Content %>
        <div class="grid grid-cols-1 gap-4">
          <div class="border-2 border-[#FFB636] rounded-lg p-2">
            <%= render partial: "hong_baos/new/front_bill",
                     locals: { paper: selected_paper, hong_bao: hong_bao, context: 'print' } %>
          </div>
          <div class="border-2 border-[#FFB636] rounded-lg p-2">
            <%= render partial: "hong_baos/new/back_bill",
                     locals: { paper: selected_paper, hong_bao: hong_bao, context: 'print' } %>
          </div>
        </div>
      </div>
    </div>

    <%# Preview Area %>
    <div class="grid grid-cols-1 gap-4">
      <div class="border-2 border-[#FFB636] rounded-lg p-2">
        <%= render partial: "hong_baos/new/front_bill",
                   locals: { paper: selected_paper, hong_bao: hong_bao, context: 'preview' } %>
      </div>
      <div class="border-2 border-[#FFB636] rounded-lg p-2">
        <%= render partial: "hong_baos/new/back_bill",
                   locals: { paper: selected_paper, hong_bao: hong_bao, context: 'preview' } %>
      </div>
    </div>
  </div>
</div>