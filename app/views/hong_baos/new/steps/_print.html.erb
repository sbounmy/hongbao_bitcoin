<div
    class="flex flex-col h-full max-h-full overflow-hidden"
     data-controller="pdf"
     data-steps-target="content"
     data-steps-index="<%= local_assigns[:index] || 2 %>">

  <div data-hong-bao-target="walletInfo" class="space-y-3 p-8">
    <div class="space-y-1">
      <div class="flex items-center justify-between">
        <span class="text-[#FFB636]">Recovery Phrase (24 words)</span>
        <button type="button"
                data-action="bitcoin#generate"
                class="text-[#FFB636] p-1.5 hover:text-[#FFB636]/80 transition-colors">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
            <path stroke-linecap="round" stroke-linejoin="round" d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0l3.181 3.183a8.25 8.25 0 0013.803-3.7M4.031 9.865a8.25 8.25 0 0113.803-3.7l3.181 3.182m0-4.991v4.99" />
          </svg>
        </button>
      </div>
      <div class="relative" data-controller="clipboard" data-clipboard-success-message-value="Recovery phrase copied!">
        <textarea readonly
                  rows="3"
                  class="w-full bg-transparent text-white font-mono text-sm py-2 px-3 pr-12 rounded border border-white/10 resize-none"
                  data-clipboard-target="source"
                  data-controller="binding"
                  data-binding-name-value="mnemonicText"
                  data-action="bitcoin:changed@window->binding#value"></textarea>
        <button data-action="clipboard#copy"
                class="absolute right-2 top-1/2 -translate-y-1/2 text-[#FFB636] p-1.5 hover:text-[#FFB636]/80 transition-colors">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
            <path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0013.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 01-.75.75H9a.75.75 0 01-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 01-2.25 2.25H6.75A2.25 2.25 0 014.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 011.927-.184" />
          </svg>
        </button>
      </div>
    </div>

    <div class="grid grid-cols-2 gap-3">
      <div class="space-y-1">
        <span class="text-[#FFB636]">Private Key</span>
        <div class="relative" data-controller="clipboard" data-clipboard-success-message-value="Private key copied!">
          <input type="text"
                  readonly
                  class="w-full bg-transparent text-white font-mono text-sm py-2 px-3 pr-12 rounded border border-white/10"
                  data-clipboard-target="source"
                  data-controller="binding"
                  data-binding-name-value="privateKeyText"
                  data-action="bitcoin:changed@window->binding#value">
          <button data-action="clipboard#copy"
                  class="absolute right-2 top-1/2 -translate-y-1/2 text-[#FFB636] p-1.5 hover:text-[#FFB636]/80 transition-colors">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
              <path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0013.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 01-.75.75H9a.75.75 0 01-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 01-2.25 2.25H6.75A2.25 2.25 0 014.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 011.927-.184" />
            </svg>
          </button>
        </div>
      </div>

      <div class="space-y-1">
        <span class="text-[#FFB636]">Bitcoin Address</span>
        <div class="relative" data-controller="clipboard" data-clipboard-success-message-value="Bitcoin address copied!">
          <input type="text"
                  readonly
                  class="w-full bg-transparent text-white font-mono text-sm py-2 px-3 pr-12 rounded border border-white/10"
                  data-clipboard-target="source"
                  data-controller="binding"
                  data-binding-name-value="publicAddressText"
                  data-action="bitcoin:changed@window->binding#value">
          <button data-action="clipboard#copy"
                  class="absolute right-2 top-1/2 -translate-y-1/2 text-[#FFB636] p-1.5 hover:text-[#FFB636]/80 transition-colors">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
              <path stroke-linecap="round" stroke-linejoin="round" d="M15.666 3.888A2.25 2.25 0 0013.5 2.25h-3c-1.03 0-1.9.693-2.166 1.638m7.332 0c.055.194.084.4.084.612v0a.75.75 0 01-.75.75H9a.75.75 0 01-.75-.75v0c0-.212.03-.418.084-.612m7.332 0c.646.049 1.288.11 1.927.184 1.1.128 1.907 1.077 1.907 2.185V19.5a2.25 2.25 0 01-2.25 2.25H6.75A2.25 2.25 0 014.5 19.5V6.257c0-1.108.806-2.057 1.907-2.185a48.208 48.208 0 011.927-.184" />
            </svg>
          </button>
        </div>
      </div>

      <fieldset class="fieldset">
        <legend class="fieldset-legend text-[#FFB636]">Beneficiary's Bitcoin level</legend>
        <div class="flex gap-2 text-white">
          <label for="level_toggle">
            <span class="">Beginner</span>
          </label>
          <input type="checkbox" checked="checked" id="level_toggle" class="toggle" />
          <label for="level_toggle">
            <span class="">PRO</span>
          </label>
        </div>
        <p class="label">Beginner : QRCode goes to hongbaob.tc for easy access</p>
      </fieldset>
    </div>
  </div>

  <!-- PDF Preview Section with simple scrolling -->
  <div class="text-white space-y-4 flex-1 overflow-auto max-w-full mx-auto pb-4">
    <!-- This is the actual content that will be rendered to PDF -->
    <div data-pdf-target='content' class="w-[210mm] h-[297mm] bg-white p-8 mx-auto flex flex-col gap-2 justify-between">
      <div class="flex items-center">
        <%= cuttable_content class: "flex flex-col items-center" do %>
          <%= render 'hong_baos/new/steps/paper_canva',
                    class_name: "w-[140mm] h-[77mm] transform-[rotate(180deg)]",
                    paper:,
                    actions: "hong-bao:back@window->canva#backgroundImageChanged",
                    elements: paper.back_elements,
                    image: paper.image_back.attached? ? url_for(paper.image_back) : ''
          %>

          <%# Fold Line %>
          <div class="border-t-2 border-dashed border-gray-400"></div>
          <%= render 'hong_baos/new/steps/paper_canva',
                    class_name: "w-[140mm] h-[77mm]",
                    paper:,
                    actions: "hong-bao:front@window->canva#backgroundImageChanged",
                    elements: paper.front_elements,
                    image: paper.image_front.attached? ? url_for(paper.image_front) : ''
          %>
        <% end %>
        <div class="relative">
          <div class="flex justify-start -ml-[180px] transform-[rotate(-90deg)] text-black w-[154mm] py-2">
            <div class="space-y-2">
              <div class="flex gap-2">
                <h2 class="text-2xl font-bold">REMINDER</h2>
                <span class="text-gray-600">(to be kept by the donor)</span>
              </div>

              <div class="space-y-4">
                <p>
                  <span class="font-bold">1.</span> Cut out the Bitcoin paper wallet (left part) and fold it to create your gift.
                </p>
                <p>
                  <span class="font-bold">2.</span> After creating the paper wallet, you can put it in a Hongâ‚¿ao (Bitcoin red envelope) and give it to the recipient.
                </p>
                <p>
                  <span class="font-bold">Warning:</span> Never share the private key with anyone. Only the recipient should have access to it.
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
      <%= render 'hong_baos/pdf/footer', paper: %>
    </div>
  </div>

  <div class="sticky bottom-0 rounded-b-3xl z-30 bg-[#F04747] border-t border-[#FFB636]/20">

    <div class="flex flex-col items-center gap-4 p-8 w-full">
      <!-- Download PDF Button -->
        <button type="button"
              class="w-full py-3 px-4 bg-[#FFB636] rounded-xl shadow-lg text-sm font-medium
                      text-black hover:bg-[#FFB636]/90 transition-colors duration-300 flex items-center justify-center gap-2"
              data-paper-pdf-target="downloadButton"
              data-action="pdf#download">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
          <path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3" />
        </svg>
        Download PDF
      </button>

      <div class="flex items-center space-x-4 w-full">
        <%= render "hong_baos/new/previous_button" if local_assigns[:index] != 1 %>
        <%= render "hong_baos/new/next_button",
          html_options: {
            disabled: true,
            data_action: "pdf:downloaded@window->disabled#remove"
          } %>
      </div>
    </div>
  </div>

</div>
