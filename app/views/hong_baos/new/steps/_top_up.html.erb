<div class="flex flex-col h-full overflow-y-auto p-4"
     data-steps-target="content"
     data-steps-index="<%= local_assigns[:index] || 3 %>">

  <div class="mb-8 text-white space-y-4">
    <h3 class="text-xl font-bold text-[#FFB636]">Top up your Hong Bao</h3>
    <p class="text-white/90">Choose your preferred way to send bitcoin to this address:</p>

    <%# Bitcoin Address Display %>
    <div>
      <%= render "shared/bitcoin_address" %>
    </div>
  </div>

  <%# Payment Methods Grid with Form %>
  <%= form_with(model: hong_bao, local: false) do |form| %>
    <%= render AlertComponent.new(
      icon: 'information-circle',
      message: 'Card / Bank Transfer top up might not be available for custom keys.',
      class: 'hidden group-[div[data-bitcoin-custom-wallet-value="true"]]:flex'
    ) %>
    <%= render "payment_methods/radio_buttons", form:, payment_methods: %>

    <div class="sticky bottom-0 rounded-b-3xl z-30 bg-[#F04747] border-t border-[#FFB636]/20">
      <div class="flex flex-col items-center gap-2 p-8 w-full">
        <%= link_to new_saved_hong_bao_path,
              target: "_blank",
              class: "btn btn-outline btn-warning py-3 w-full",
              data: {
                controller: "binding",
                action: "bitcoin:changed@window->binding#attribute",
                binding_name_value: "publicAddressText",
                binding_attribute_value: "href",
                binding_template_value: "#{new_saved_hong_bao_path}?address={publicAddressText}"
              } do %>
          Track this HongBao
          <%= heroicon "arrow-trending-up", variant: :outline, class: "w-5 h-5" %>
        <% end %>
        <%= render "hong_baos/new/verify_button", current_step: 3, hong_bao: hong_bao %>
      </div>
    </div>
  <% end %>
</div>