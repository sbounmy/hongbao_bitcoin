<% item = item.with_indifferent_access %>
<%
  # Determine controller based on item type
  is_qr_code = name.end_with?('_qrcode')
  is_mnemonic = name.start_with?('mnemonic')
  controller_name = is_qr_code ? 'image-item' : 'text-item'
  item_type = is_mnemonic ? 'mnemonic' : 'text'
  data_prefix = is_qr_code ? 'image_item' : 'text_item'
%>
<%= tag.div data: {
      controller: controller_name,
      canva_target: 'canvaItem',
      "#{data_prefix}_x_value": item[:x],
      "#{data_prefix}_y_value": item[:y],
      "#{data_prefix}_name_value": name.camelize(:lower),
      "#{data_prefix}_width_value": item[:width],
      "#{data_prefix}_height_value": item[:height],
      "#{data_prefix}_hidden_value": item[:hidden]
    }.merge(
      is_qr_code ? {} : {
        "#{data_prefix}_text_value": item[:text],
        "#{data_prefix}_type_value": item_type,
        "#{data_prefix}_font_size_value": item[:size],
        "#{data_prefix}_font_color_value": item[:color]
      }
    ),
    class: 'hidden canva-item' %>
