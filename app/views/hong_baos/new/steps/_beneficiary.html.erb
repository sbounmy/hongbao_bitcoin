<div class="flex flex-col h-full max-h-full overflow-hidden px-4 py-2"
     data-controller='password-validator disabled'
     data-action='password-validator:error->disabled#add password-validator:success->disabled#remove bitcoin:changed@window->binding#attribute'
     data-steps-target="content"
     data-steps-index="<%= local_assigns[:index] || 2 %>">

  <fieldset class="fieldset">
    <legend class="fieldset-legend text-[#FFB636]">Beneficiary</legend>
    <div class="flex gap-2 text-white">
      <label for="mode">
        <span class="">Beginner</span>
      </label>
      <input type="checkbox" id="mode" class="toggle" data-action="bitcoin#modeChanged" />
      <label for="mode">
        <span class="">Maximalist</span>
      </label>
    </div>
    <p class="label">Beginner : QRCode goes to hongbaob.tc for easy access</p>
  </fieldset>

  <fieldset class="fieldset mt-4">
    <legend class="fieldset-legend text-[#FFB636]">Password (Highly Recommended)</legend>
    <div class="space-y-2" data-controller="password-visibility">
      <div class="relative">
        <input type="password"
               data-pdf-target="password"
               data-password-visibility-target="input"
               data-password-validator-target="field"
               data-field="pdf-password"
               data-validates-strong-password="true"
               data-validates-length="8,128"
               placeholder="Enter strong password (min 8 chars)"
               class="input input-bordered w-full pr-10 text-white placeholder-white/50 bg-[#F04747]/50 border-[#FFB636]/30">
        <button type="button"
                data-action="password-visibility#toggle"
                class="absolute right-2 top-1/2 -translate-y-1/2 text-white/70 hover:text-white">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"></path>
          </svg>
        </button>
      </div>
      <div data-password-validator-target="errors"
           data-field="pdf-password"
           data-errors-styles-css="font-size: 12px; color: #fff; background-color: rgba(220, 38, 38, 0.9); padding: 4px 8px; border-radius: 4px; margin-top: 4px; display: inline-block;"
           class="text-xs"></div>
      <p class="text-xs text-white/70">
        Leave empty to skip password protection. A strong password requires uppercase, lowercase, numbers and special characters.
      </p>
    </div>
  </fieldset>

  <div class="sticky bottom-0 rounded-b-3xl z-30 bg-[#F04747] border-t border-[#FFB636]/20">
    <div class="flex flex-col items-center gap-4 w-full">
      <!-- Download PDF Button -->
      <button type="button"
              data-disabled-target='element'
              class="cursor-pointer w-full py-3 px-4 bg-[#FFB636] rounded-xl shadow-lg text-sm font-medium
                      text-black hover:bg-[#FFB636]/90 transition-colors duration-300 flex items-center justify-center gap-2 disabled:opacity-30"
              data-action="pdf#download">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
          <path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5M16.5 12L12 16.5m0 0L7.5 12m4.5 4.5V3" />
        </svg>
        Download PDF
      </button>

      <div class="flex items-center space-x-4 w-full">
        <%= render "hong_baos/new/next_button",
          html_options: {
            disabled: true,
            data_action: "pdf:downloaded@window->disabled#remove"
          } %>
      </div>
    </div>
  </div>
</div>