<canvas id="imageCanvas" class="border w-full"></canvas>
<script>
  const canvas = document.getElementById('imageCanvas');
  const ctx = canvas.getContext('2d');
  function loadImageFront(imageUrl) {
    const img = new Image();
    img.src = imageUrl; 
    img.height = 374.1;
    img.width = 793.7;
    img.onload = () => {
      canvas.width = img.width; 
      canvas.height = img.height; 
      img.style.border = '2px dashed #000';
      img.style.padding = '10px';
      
      ctx.clearRect(0, 0, canvas.width, canvas.height); 
      ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
      drawTextFront('<%= @hong_bao.amount %>', 'amount');
      drawTextFront('0.0005', 'amount_btc');
    };

    img.onerror = () => {
      console.error('Image failed to load.');
    };
  }
  
  function drawTextFront(text, element) {
    const elementParams = elementConfigs[element]; 
    ctx.fillStyle = 'black';
    ctx.font = `bold ${elementParams["size"]}px Arial`;
    ctx.fillText(text, 
        canvas.width * elementParams["x"], 
        canvas.height * elementParams["y"]
    );
  }

  const paperImageFrontUrl = '<%= @hong_bao.paper.image_front.attached? ? url_for(@hong_bao.paper.image_front) : "" %>';
  loadImageFront(paperImageFrontUrl);
</script> 
